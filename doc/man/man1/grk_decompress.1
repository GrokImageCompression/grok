.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "grk_decompress" "1" "" "Version 10.0" "convert from JPEG 2000 format"
.hy
.SH NAME
.PP
grk_decompress - decompresses an image in the JPEG 2000 format to a
different image format
.SH SYNOPSIS
.PP
\f[B]grk_dcompress\f[R] [\f[B]-i\f[R] infile.j2k] [\f[B]-o\f[R]
outfile.bmp]
.SH DESCRIPTION
.PP
This program decompresses a JPEG 2000 image and stores it in another
image format.
.PP
Supported input formats: \f[V]JP2\f[R], \f[V]J2K\[rs]J2C\[rs]JPC\f[R],
\f[V]JPH\f[R] and \f[V]JHC\f[R] The codec will determine the file input
format, regardless of file tag.
.PP
Supported output formats are \f[V]JPEG\f[R], \f[V]BMP\f[R],
\f[V]PNM\f[R], \f[V]PGX\f[R], \f[V]PNG\f[R], \f[V]RAW\f[R] and
\f[V]TIFF\f[R] Valid output image extensions are \f[V]jpg\f[R],
\f[V].jpeg\f[R], \f[V].bmp\f[R], \f[V].pgm\f[R], \f[V].pgx\f[R],
\f[V].pnm\f[R], \f[V].ppm\f[R], \f[V].pam\f[R], \f[V].png\f[R],
\f[V].raw\f[R], \f[V].rawl\f[R], \f[V].tif\f[R] and \f[V].tiff\f[R]
.IP \[bu] 2
For \f[V]PNG\f[R] the library must have \f[V]libpng\f[R] available.
.IP \[bu] 2
For \f[V]TIF\[rs]\[rs]TIFF\f[R] the library must have \f[V]libtiff\f[R]
available.
.IP \[bu] 2
For \f[V]JPG\[rs]\[rs]JPEG\f[R] the library must have a
\f[V]libjpeg\f[R] variant available.
.PP
Limitations
.IP \[bu] 2
Grok supports up to and including 16 bit sample precision for
decompression.
This is a subset of the ISO standard, which allows up to 38 bit
precision.
.PP
stdout
.PP
The decompresser can write output to \f[V]stdout\f[R] for the following
formats: \f[V]BMP\f[R],\f[V]PNG\f[R], \f[V]JPG\f[R], \f[V]PNM\f[R],
\f[V]RAW\f[R] and \f[V]RAWL\f[R].
To enable writing to \f[V]stdout\f[R], please ensure that the
\f[V]-o\f[R] parameter is \f[B]not\f[R] present in the command line, and
that the \f[V]-out_fmt\f[R] parameter is set to one of the supported
formats listed above.
Note: the verbose flag \f[V]-v\f[R] will be ignored in this mode, as
verbose output would corrupt the output file.
.PP
Embedded ICC Profile
.PP
If there is an embedded ICC profile in the input file, then the profile
will be stored in the output file for \f[V]TIF\[rs]TIFF\f[R],
\f[V]JPG\f[R], \f[V]BMP\f[R] and \f[V]PNG\f[R] formats.
For other formats, the profile will be applied to the decompressed image
before it is stored.
.PP
IPTC (JP2 only)
.PP
If a compressed input contains \f[V]IPTC\f[R] metadata, this metadata
will be stored to the output file if that output file is in
\f[V]TIF\[rs]TIFF\f[R] format.
.PP
XMP (JP2only)
.PP
If a compressed input contains \f[V]XMP\f[R] metadata, this metadata
will be stored to the output file if that output file is in
\f[V]TIF\[rs]\[rs]TIFF\f[R] or \f[V]PNG\f[R] format.
.PP
Exif (JP2only)
.PP
To transfer Exif and all other meta-data tags, use the command line
argument \f[V]-V\f[R] described below.
To transfer the tags, Grok uses the ExifTool (https://exiftool.org/)
Perl module.
ExifTool must be installed for this command line argument to work
properly.
Note: transferring Exif tags may add a few hundred ms to the decompress
time, depending on the system.
.PP
\f[B]Important note on command line argument notation below\f[R]: the
outer square braces appear for clarity only,and \f[B]should not\f[R] be
included in the actual command line argument.
Square braces appearing inside the outer braces \f[B]should\f[R] be
included.
.SS Options
.PP
\f[V]-h,  --help\f[R]
.PP
Print a help message and exit.
.PP
\f[V]--version\f[R]
.PP
Print library version and exit.
.PP
\f[V]-v, --verbose\f[R]
.PP
Output information and warnings about decoding to console (errors are
always output).
Console is silent by default.
.PP
\f[V]-i, --in-file [file]\f[R]
.PP
Input file.
Either this argument or the \f[V]-batch_src\f[R] argument described
below is required.
Valid input image extensions are J2K, JP2 and JPC.
When using this option output file must be specified using -o.
.PP
\f[V]-o, --out-file [file]\f[R]
.PP
Output file.
Required when using \f[V]-i\f[R] option.
See above for supported file types.
If a \f[V]PGX\f[R] filename is given, there will be as many output files
as there are components: an index starting from 0 will then be appended
to the output filename, just before the \f[V]pgx\f[R] extension.
If a \f[V]PGM\f[R] filename is given and there is more than one
component, then only the first component will be written to the file.
.PP
\f[V]-y, --batch-src [directory path]\f[R]
.PP
Path to the folder where the compressed images are stored.
Either this argument or the \f[V]-i\f[R] argument described above is
required.
When image files are in the same directory as the executable, this can
be indicated by a dot \f[V].\f[R] argument.
When using this option, the output format must be specified using
\f[V]-out_fmt\f[R].
Output images are saved in the same folder.
.PP
\f[V]-a, --out-dir [output directory]\f[R]
.PP
Output directory where compressed files are stored.
Only relevant when the \f[V]-batch_src\f[R] flag is set.
Default: same directory as specified by \f[V]-batch_src\f[R].
.PP
\f[V]-O, --out-fmt [format]\f[R]
.PP
Output format used to decompress the code streams.
Required when \f[V]-batch_src\f[R] option is used.
See above for supported formats.
.PP
\f[V]-r, --reduce [reduce factor]\f[R]
.PP
Reduce factor.
Set the number of highest resolution levels to be discarded.
The image resolution is effectively divided by 2 to the power of the
number of discarded levels.
The reduce factor is limited by the smallest total number of
decomposition levels among tiles.
.PP
\f[V]-l, --layer [layer number]\f[R]
.PP
Layer number.
Set the maximum number of quality layers to decode.
If there are fewer quality layers than the specified number, all quality
layers will be decoded.
.PP
\f[V]-d, --region [x0,y0,x1,y1]\f[R]
.PP
Decompress a region of the image.
If \f[V](X,Y)\f[R] is a location in the image, then it will only be
decoded if \f[V]x0 <= X < x1\f[R] and \f[V]y0 <= Y < y1\f[R].
By default, the entire image is decoded.
.PP
There are two ways of specifying the decompress region:
.IP "1." 3
pixel coordinates relative to image origin - region is specified in 32
bit integers.
.PP
Example: if image coordinates on canvas are \f[V](50,50,1050,1050)\f[R]
and region is specified as \f[V]-d 100,100,200,200\f[R], then a region
with canvas coordinates \f[V](150,150,250,250)\f[R] is decompressed
.IP "2." 3
pixel coordinates relative to image origin and scaled as double point to
unit square \f[V][0,0,1,1]\f[R]
.PP
The above example would be specified as \f[V]-d 0.1,0.1,0.2,0.2\f[R]
.PP
Note: there is one ambiguous case, namely \f[V]-d 0,0,1,1\f[R], which
could be interpreted as either scaled or un-scaled.
We treat this case as a \f[B]scaled\f[R] pixel region.
.PP
\f[V]-c, --compression [compression value]\f[R]
.PP
Compress output image data.
Currently, this flag is only applicable when output format is set to
\f[V]TIF\f[R].
Possible values are {\f[V]NONE\f[R], \f[V]LZW\f[R],\f[V]JPEG\f[R],
\f[V]PACKBITS\f[R].
\f[V]ZIP\f[R],\f[V]LZMA\f[R],\f[V]ZSTD\f[R],\f[V]WEBP\f[R]}.
Default value is \f[V]NONE\f[R].
.PP
\f[V]-L, --compression-level [compression level]\f[R]
.PP
\[lq]Quality\[rq] of compression.
Currently only implemented for \f[V]PNG\f[R] format.
For \f[V]PNG\f[R], compression level ranges from 0 (no compression) up
to 9.
Grok default value is 3.
.PP
Note: PNG is always lossless, so using a different level will not affect
the image quality.
It only changes the speed vs file size tradeoff.
.PP
\f[V]-t, --tile-index [tile index]\f[R]
.PP
Only decode tile with specified index.
Index follows the JPEG2000 convention from top-left to bottom-right.
By default all tiles are decoded.
.PP
\f[V]-p, --precision [component 0 precision[C|S],component 1 precision[C|S],...]\f[R]
.PP
Force precision (bit depth) of components.
There must be at least one value present, but there is no limit on the
number of values.
The last values are ignored if too many values.
If there are fewer values than components, the last value is used for
the remaining components.
If \f[V]C\f[R] is specified (default), values are clipped.
If \f[V]S\f[R] is specified, values are scaled.
Specifying a \f[V]0\f[R] value indicates use of the original bit depth.
.PP
Example:
.IP
.nf
\f[C]
 -p 8C,8C,8c
\f[R]
.fi
.PP
Clip all components of a 16 bit RGB image to 8 bits.
.PP
\f[V]-f, --force-rgb\f[R]
.PP
Force output image color space to \f[V]RGB\f[R].
For \f[V]TIF/TIFF\f[R] or \f[V]PNG\f[R] output formats, the ICC profile
will be applied in this case - default behaviour is to stored the
profile in the output file, if supported.
.PP
\f[V]-u, --upsample\f[R]
.PP
Sub-sampled components will be upsampled to image size.
.PP
\f[V]-s, --split-pnm\f[R]
.PP
Split output components into different files when writing to
\f[V]PNM\f[R].
.PP
\f[V]-X, --xml [output file name]\f[R]
.PP
Store XML metadata to file, if it exists in compressed file.
File name will be set to \f[V]output file name + \[dq].xml\[dq]\f[R]
.PP
\f[V]-V, --transfer-exif-tags\f[R]
.PP
Transfer all Exif tags to output file.
Note: ExifTool (https://exiftool.org/) must be installed for this
command line argument to work correctly.
.PP
\f[V]-W, --log-file [output file name]\f[R]
.PP
Log to file.
File name will be set to \f[V]output file name\f[R]
.PP
\f[V]-H, -num--threads [number of threads]\f[R]
.PP
Number of threads used for T1 compression.
Default is total number of logical cores.
.SH FILES
.SH ENVIRONMENT
.SH BUGS
.PP
See GitHub Issues: https://github.com/GrokImageCompression/grok/issues
.SH AUTHOR
.PP
Grok Image Compression Inc.
.SH SEE ALSO
.PP
\f[B]grk_compress(1)\f[R]
